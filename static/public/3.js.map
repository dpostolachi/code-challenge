{"version":3,"sources":["webpack:///../actions/favouriteBands.js","webpack:///../components/pages/favourites.js"],"names":["fetchFavouriteBands","bandNames","dispatch","type","Promise","all","map","bandName","resolve","reject","ARTISTS_URL","API_KEY","then","resp","json","data","error","catch","e","bands","payload","SearchPage","store","favouriteBands","favourite","props","state","fetched","pending","length","band","key","nextProps","prevState","prevBands","toString","PureComponent"],"mappings":"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","file":"3.js","sourcesContent":["import { API_KEY, ARTISTS_URL } from 'settings/api'\nimport { get } from 'actions/utils'\n\n// Fetch all favourite bands\nexport const fetchFavouriteBands = ( bandNames ) => {\n\n    return ( dispatch ) => {\n\n        dispatch( {\n            type: 'FAVOURITE_BANDS_PENDING',\n        } )\n\n        return Promise.all( bandNames.map( ( bandName ) => {\n\n            return new Promise( ( resolve, reject ) => {\n\n                return get( `${ARTISTS_URL}/${bandName}?app_id=${API_KEY}` )\n                .then( ( resp ) => resp.json() )\n                .then( ( data ) => {\n                    if ( data && !data.error ){\n                        return resolve( data )\n                    } else {\n                        return reject( data.error )\n                    }\n                } )\n                .catch( ( e ) => {\n                    return reject( e )\n                } )\n\n            } )\n\n        } ) )\n        .then( ( bands ) => {\n            if ( bands ) {\n                return dispatch( {\n                    type: 'FAVOURITE_BANDS_FULFILLED',\n                    payload: bands,\n                } )\n            } else {\n                return dispatch( {\n                    type: 'FAVOURITE_BANDS_NO_RESULT',\n                    payload: bands,\n                } )\n            }\n\n        } )\n        .catch( () => {\n            return dispatch( {\n                type: 'FAVOURITE_BANDS_REJECTED',\n            } )\n        } )\n\n    }\n\n}\n","import React, { PureComponent } from 'react'\nimport { connect } from 'react-redux'\nimport styled, { keyframes } from 'styled-components'\nimport { parse } from 'query-string'\nimport { fetchFavouriteBands } from 'actions/favouriteBands'\nimport BandThumb from 'components/blocks/bandThumb'\nimport SearchForm from 'components/controls/searchForm'\nimport Container from 'components/common/container'\nimport Heading from 'components/common/heading'\nimport LazyImage from 'components/common/lazyImage'\nimport ResultsContainer from 'components/common/resultsContainer'\nimport Placeholder from 'components/common/placeholder'\nimport { mainColor } from 'components/variables/colors'\n\n@connect( ( store ) => {\n    return {\n        favouriteBands: store.favouriteBands,\n        favourite: store.favourite,\n    }\n} )\n\nexport default class SearchPage extends PureComponent {\n\n    constructor ( props ) {\n\n        super( props )\n\n        this.state = {\n            bands: [],\n        }\n\n    }\n\n    static getDerivedStateFromProps( nextProps, prevState ) {\n\n        const { favourite } = nextProps\n        const prevBands = ( prevState ) ? prevState.bands : []\n\n        if ( favourite.toString() !== prevBands.toString() ) {\n            nextProps.dispatch( fetchFavouriteBands( favourite ) )\n        }\n        return {\n            bands: favourite\n        }\n    }\n\n    render () {\n\n        const { fetched, pending, data } = this.props.favouriteBands\n        const { favourite } = this.props\n\n        return (\n            <Container>\n                <Heading>Favourite bands</Heading>\n                <ResultsContainer className={ ( pending ) ? 'loading' : null }>\n                    { ( favourite.length === 0 ) ? <Placeholder>You have no favourite bands, yet</Placeholder> : (\n                        ( fetched && data ) ? (\n                            data.map( ( band, key ) => {\n                                return <BandThumb { ...band } key={ key } />\n                            } )\n                        ) : (\n                            <Placeholder>{ ( !fetched ) ? 'Loading...' : 'No events found' }</Placeholder>\n                        )\n                    )  }\n                </ResultsContainer>\n            </Container>\n        )\n    }\n}\n"],"sourceRoot":""}